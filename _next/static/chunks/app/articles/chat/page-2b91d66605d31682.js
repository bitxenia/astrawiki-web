(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{8585:(e,r,t)=>{Promise.resolve().then(t.bind(t,98896))},17671:(e,r,t)=>{"use strict";t.d(r,{o:()=>s});var a=t(95155);function s(e){let{children:r}=e;return(0,a.jsx)("div",{className:"typography",children:r})}},23925:(e,r,t)=>{"use strict";t.d(r,{A:()=>h});var a=t(95155),s=t(12115),n=t(35695),l=t(99708),o=t(14549),i=t(53999);let c=s.forwardRef((e,r)=>{let{...t}=e;return(0,a.jsx)("nav",{ref:r,"aria-label":"breadcrumb",...t})});c.displayName="Breadcrumb";let u=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("ol",{ref:r,className:(0,i.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",t),...s})});u.displayName="BreadcrumbList";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("li",{ref:r,className:(0,i.cn)("inline-flex items-center gap-1.5",t),...s})});d.displayName="BreadcrumbItem";let f=s.forwardRef((e,r)=>{let{asChild:t,className:s,href:o,...c}=e,u=(0,n.useRouter)(),d=t?l.DX:"a";return(0,a.jsx)(d,{ref:r,href:o,onClick:e=>{o&&o.startsWith("/")&&(e.preventDefault(),u.push(o))},className:(0,i.cn)("transition-colors hover:text-foreground",s),...c})});f.displayName="BreadcrumbLink";let m=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:(0,i.cn)("font-normal text-foreground",t),...s})});m.displayName="BreadcrumbPage";let p=e=>{let{children:r,className:t,...s}=e;return(0,a.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,i.cn)("[&>svg]:size-3.5",t),...s,children:null!=r?r:(0,a.jsx)(o.xCi,{})})};function h(e){let{paths:r}=e;return(0,a.jsx)("div",{className:"pb-5",children:(0,a.jsx)(c,{children:(0,a.jsxs)(u,{children:[(0,a.jsx)(d,{children:(0,a.jsx)(f,{href:"/",children:"Articles"})}),r.map((e,t)=>{let n="/articles?name=".concat(r.slice(0,t+1).join("/"));return(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(p,{}),(0,a.jsx)(d,{children:t<r.length-1?(0,a.jsx)(f,{href:n,className:"a",children:g(e)}):(0,a.jsx)(m,{className:"b",children:g(e)})})]},e)})]})})})}function g(e){return e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}p.displayName="BreadcrumbSeparator"},31035:(e,r,t)=>{"use strict";t.d(r,{f:()=>s});let a=Date.now();function s(e){let r=a-e;return r<36e5?"".concat(Math.max(1,Math.floor(r/6e4)),"m ago"):r<864e5?"".concat(Math.floor(r/36e5),"h ago"):r<6048e5?"".concat(Math.floor(r/864e5),"d ago"):new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},35695:(e,r,t)=>{"use strict";var a=t(18999);t.o(a,"notFound")&&t.d(r,{notFound:function(){return a.notFound}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},53999:(e,r,t)=>{"use strict";t.d(r,{cn:()=>n});var a=t(52596),s=t(39688);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.A)(r))}},72706:(e,r,t)=>{"use strict";t.d(r,{Rr:()=>l,hc:()=>n,oK:()=>s});var a=t(12115);let s=(0,a.createContext)({isESLoading:!1,setIsESLoading:()=>{},esName:"",setESName:()=>{}}),n=(0,a.createContext)({storage:null,setStorage:()=>{}}),l=(0,a.createContext)({chatStorage:null,setChatStorage:()=>{}})},74436:(e,r,t)=>{"use strict";t.d(r,{k5:()=>u});var a=t(12115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(s),l=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach(function(r){var a,s,n;a=e,s=r,n=t[r],(s=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(s))in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function u(e){return r=>a.createElement(d,o({attr:c({},e.attr)},r),function e(r){return r&&r.map((r,t)=>a.createElement(r.tag,c({key:t},r.attr),e(r.child)))}(e.child))}function d(e){var r=r=>{var t,{attr:s,size:n,title:i}=e,u=function(e,r){if(null==e)return{};var t,a,s=function(e,r){if(null==e)return{};var t={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;t[a]=e[a]}return t}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)t=n[a],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}(e,l),d=n||r.size||"1em";return r.className&&(t=r.className),e.className&&(t=(t?t+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,u,{className:t,style:c(c({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&a.createElement("title",null,i),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>r(e)):r(s)}},74466:(e,r,t)=>{"use strict";t.d(r,{F:()=>l});var a=t(52596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,l=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return n(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:l,defaultVariants:o}=r,i=Object.keys(l).map(e=>{let r=null==t?void 0:t[e],a=null==o?void 0:o[e];if(null===r)return null;let n=s(r)||s(a);return l[e][n]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return n(e,i,null==r?void 0:null===(a=r.compoundVariants)||void 0===a?void 0:a.reduce((e,r)=>{let{class:t,className:a,...s}=r;return Object.entries(s).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...o,...c}[r]):({...o,...c})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},97168:(e,r,t)=>{"use strict";t.d(r,{$:()=>c,r:()=>i});var a=t(95155),s=t(12115),n=t(99708),l=t(74466),o=t(53999);let i=(0,l.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-9 w-9",xs:"h-7 rounded-md px-2"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,r)=>{let{className:t,variant:s,size:l,asChild:c=!1,...u}=e,d=c?n.DX:"button";return(0,a.jsx)(d,{className:(0,o.cn)(i({variant:s,size:l,className:t})),ref:r,...u})});c.displayName="Button"},98896:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var a=t(95155),s=t(23925),n=t(97168),l=t(17671),o=t(72706),i=t(31035),c=t(35695),u=t(12115),d=t(14549);function f(){let[e,r]=(0,u.useState)([]),[t,n]=(0,u.useState)(!1),[i,d]=(0,u.useState)(!1),[f,g]=(0,u.useState)(null),{chatStorage:v}=(0,u.useContext)(o.Rr),x=(0,c.useSearchParams)().get("name"),b=(0,u.useRef)(null),y=()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};async function j(e){n(!0),await v.sendChatMessage(x,e,null==f?void 0:f.id),n(!1),g(null)}return(0,u.useEffect)(()=>{y()},[e]),(0,u.useEffect)(()=>{console.log("Listening to new messages..."),(async()=>{await v.listenToNewMessages(x,e=>{r(r=>[...r,e])})})()},[x,v]),(0,u.useEffect)(()=>{(async function(){try{let e=await v.getChatMessages(x);r(e)}catch(e){d(!0)}})()},[x,v]),i&&(0,c.notFound)(),(0,a.jsx)("div",{className:"mb-5 flex items-start gap-14",children:(0,a.jsxs)("div",{className:"flex-[3] pt-10",children:[(0,a.jsx)(s.A,{paths:[x,"chat"]}),(0,a.jsx)(l.o,{children:(0,a.jsx)("h1",{className:"-mt-2 text-3xl",children:x})}),(0,a.jsxs)("ul",{className:"mb-4 flex-grow overflow-y-auto shadow",children:[e.sort((e,r)=>e.timestamp<r.timestamp?-1:1).map(r=>(0,a.jsx)(m,{message:r,parentMessage:r.parentId?e.find(e=>e.id===r.parentId):void 0,setReplyingMessage:g},r.id)),(0,a.jsx)("div",{ref:b})]}),0===e.length&&(0,a.jsx)("div",{className:"text-center text-gray-500",children:"No messages yet. Be the first to send a message!"}),f&&(0,a.jsx)(p,{message:f,setReplyingMessage:g}),(0,a.jsx)(h,{sendMessage:j,isSending:t})]})})}let m=e=>{let{message:r,parentMessage:t,setReplyingMessage:s}=e;return(0,a.jsxs)("li",{className:"flex cursor-pointer flex-col gap-2 border-x border-t px-3 py-3 hover:bg-gray-100",onClick:()=>{s(r)},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("strong",{children:r.sender}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:(0,i.f)(1e3*r.timestamp)})]}),t&&(0,a.jsx)(p,{message:t}),r.message]})},p=e=>{let{message:r,setReplyingMessage:t}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 border border-gray-300 bg-gray-100 p-2",children:[t&&(0,a.jsx)(d.SXS,{className:"h-8 w-8 cursor-pointer rounded-full p-1 text-red-500 hover:bg-red-200",onClick:()=>t(null)}),(0,a.jsxs)("span",{className:"text-gray-500",children:["Reply to ",(0,a.jsx)("strong",{children:r.sender}),(0,a.jsx)("br",{}),r.message]})]})},h=e=>{let{sendMessage:r,isSending:t}=e,[s,l]=(0,u.useState)(""),o=async()=>{await r(s),l("")};return(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsxs)("div",{className:"relative grid grow","data-replicated-value":s+" ",children:[(0,a.jsx)("textarea",{className:"font-inherit absolute inset-0 resize-none overflow-hidden whitespace-pre-wrap rounded-md border border-black px-4 py-2",placeholder:"Message",value:s,onChange:e=>l(e.target.value),onKeyDown:async e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),await o())}}),(0,a.jsx)("div",{className:"font-inherit invisible whitespace-pre-wrap rounded-md border border-black px-4 py-2","aria-hidden":"true",children:s+" "})]}),(0,a.jsx)("button",{className:(0,n.r)({variant:"default",size:"default"}),onClick:o,disabled:t,children:t?(0,a.jsx)("span",{className:"text-sm",children:"..."}):(0,a.jsx)(d.Qv8,{className:"h-5 w-5"})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[150,848,441,684,358],()=>r(8585)),_N_E=e.O()}]);